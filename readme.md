# novelformatter

"novelformatter"は、OpenAIのAPIを用いてユーザーからの入力を処理するWebアプリケーションです。HTMLとPythonを主に使って作成されています&#8203;``oaicite:{"number":1,"metadata":{"title":"GitHub - alenbluebee/novelformatter: OpenAIapi base prompt preprocessor for Online amatur writer","url":"https://github.com/alenbluebee/novelformatter","text":"Languages\n\n  *  HTML 65.7%  \n  *  Python 34.3"}}``&#8203;。このプロジェクトはGPL-3.0ライセンスで公開されています&#8203;``oaicite:{"number":1,"metadata":{"title":"GitHub - alenbluebee/novelformatter: OpenAIapi base prompt preprocessor for Online amatur writer","url":"https://github.com/alenbluebee/novelformatter","text":"OpenAIapi base prompt preprocessor for Online amatur writer \n\n### License\n\n GPL-3.0 license"}}``&#8203;。

## 機能

アプリケーションは、次のように動作します：

1. ユーザーからプロンプトとテキストの入力を受け取ります。
2. 入力されたプロンプトとテキストを結合し、OpenAI APIに送信します。
3. APIからのレスポンスを整形してユーザーに表示します。

使用するGPT-3エンジンは "text-davinci-003" で、最大トークン数は2000、温度パラメータは0.8と設定されています&#8203;``oaicite:{"number":2,"metadata":{"title":"novelformatter/novelformatter/app.py at main · alenbluebee/novelformatter · GitHub","url":"https://github.com/alenbluebee/novelformatter/blob/main/novelformatter/app.py","text":"from dotenv import load_dotenv  \n import os  \n from flask import Flask, render_template, request  \n import openai  \n\n app = Flask(__name__)  \n\n def load_api_key():  \n  # .env ファイルを読み込む  \n  load_dotenv()  \n  # 環境変数から API キーを取得する  \n  return os.getenv('OPENAI_API_KEY')  \n\n def format_novel(input_text):  \n  # OpenAI APIを使用してテキスト処理を行う  \n  response = openai.Completion.create(  \n  engine=\"text-davinci-003\", # 使用するGPT-3モデル  \n  prompt=input_text, # 入力テキスト  \n  max_tokens=2000, # 出力テキストの最大トークン数  \n  temperature=0.8, # 出力の多様性を制御する温度パラメータ  \n  )  \n  return response.choices[0].text.strip() # 処理結果のテキストを取得  \n\n @app.route('/')  \n def index():  \n  return render_template('index.html')  \n\n @app.route('/format', methods=['POST'])  \n def format():  \n  prompt = request.form['prompt'] # プロンプト入力欄の内容を取得  \n  text = request.form['text'] # 本文入力欄の内容を取得  \n  input_text = prompt + ' ' + text # プロンプトと本文を結合してAPIに渡すテキストを作成  \n\n  formatted_novel = format_novel(input_text) # APIにテキストを渡して処理結果を取得  \n  return render_template('result.html', formatted_novel=formatted_novel)  \n\n if __name__ == '__main__':  \n  # APIキーの読み込み  \n  openai.api_key = load_api_key()  \n\n  app.run(debug=True"}}``&#8203;。

## UI

アプリケーションのUIは、主に2つの画面から構成されています：

- **入力画面**：ここではユーザーにプロンプトとテキストの入力を求めます。入力フォームは"/format"エンドポイントにPOSTメソッドでデータを送信します&#8203;``oaicite:{"number":3,"metadata":{"title":"novelformatter/novelformatter/templates/index.html at main · alenbluebee/novelformatter · GitHub","url":"https://github.com/alenbluebee/novelformatter/blob/main/novelformatter/templates/index.html","text":"DOCTYPE html>  \n <html>  \n <head>  \n  <title>Novel Formatter</title>  \n  <link rel=\"stylesheet\" href=\"https://cdn.metroui.org.ua/v4/css/metro-all.min.css\">  \n  <style>  \n  body {  \n  background-image: url(\"/static/background.png\");  \n  background-size: cover;  \n  background-repeat: no-repeat;  \n  background-position: center center;  \n  }  \n\n  h1 {  \n  color: #fff;  \n  text-align: center;  \n  padding: 20 px;  \n  font-size: 32 px;  \n  }  \n\n  form {  \n  max-width: 600 px;  \n  margin: 0 auto;  \n  padding: 20 px;  \n  background-color: rgba(255, 255, 255, 0.8);  \n  border-radius: 5 px;  \n  }  \n\n  label {  \n  display: block;  \n  font-size: 18 px;  \n  margin-bottom: 10 px;  \n  }  \n\n  input[type=\"text\"],  \n  textarea {  \n  width: 100%;  \n  padding: 10 px;  \n  font-size: 16 px;  \n  border-radius: 5 px;  \n  resize: vertical;  \n  }  \n\n  input[type=\"submit\"] {  \n  display: block;  \n  width: 100%;  \n  padding: 10 px;  \n  font-size: 18 px;  \n  background-color: #4caf50;  \n  color: #fff;  \n  border: none;  \n  border-radius: 5 px;  \n  cursor: pointer;  \n  }  \n  </style>  \n </head>  \n <body>  \n  <h1>Novel Formatter</h1>  \n  <form action=\"/format\" method=\"post\">  \n  <label for=\"prompt\">Prompt:</label>  \n  <input type=\"text\" id=\"prompt\" name=\"prompt\" value=\"\"><br>  \n  <label for=\"text\">Text:</label>  \n  <textarea id=\"text\" name=\"text\"></textarea><br>  \n  <input type=\"submit\" value=\"Submit\">  \n  </form>  \n\n  <script src=\"https://cdn.metroui.org.ua/v4/js/metro.min.js\"></script>  \n </body>  \n </html"}}``&#8203;。
- **結果表示画面**：OpenAI APIからのレスポンスが整形されて表示されます。整形されたテキストはスクロール可能なボックス内に表示されます&#8203;``oaicite:{"number":4,"metadata":{"title":"novelformatter/novelformatter/templates/result.html at main · alenbluebee/novelformatter · GitHub","url":"https://github.com/alenbluebee/novelformatter/blob/main/novelformatter/templates/result.html","text":"DOCTYPE html>  \n <html>  \n <head>  \n  <title>Formatted Novel</title>  \n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">  \n  <style>  \n  body {  \n  font-family: Arial, sans-serif;  \n  margin: 0;  \n  padding: 20 px;  \n  background-image: url('/static/ps_mokume_11.png') ;  \n  background-size: cover;  \n  background-position: center;  \n  }  \n\n  h1 {  \n  color: #333;  \n  text-align: center;  \n  }  \n\n  .scroll-box {  \n  height: 400 px;  \n  overflow-y: scroll;  \n  border: 1 px solid #ccc;  \n  padding: 10 px;  \n  background-color: rgba(255, 255, 255, 0.8);  \n  border-radius: 5 px;  \n  box-shadow: 0 0 10 px rgba(0, 0, 0, 0.1);  \n  }  \n\n  p {  \n  margin: 0;  \n  }  \n  </style>  \n </head>  \n <body>  \n  <h1>Formatted Novel</h1>  \n  <div class=\"scroll-box\">  \n  <p>{{ formatted_novel }}</p>  \n  </div>  \n </body>  \n </html"}}``&#8203;。

## ライセンス

このプロジェクトはGPL-3.0ライセンスの下で公開されています&#8203;``oaicite:{"number":1,"metadata":{"title":"GitHub - alenbluebee/novelformatter: OpenAIapi base prompt preprocessor for Online amatur writer","url":"https://github.com/alenbluebee/novelformatter","text":"OpenAIapi base prompt preprocessor for Online amatur writer \n\n### License\n\n GPL-3.0 license"}}``&#8203;。
OpenAIapi base prompt preprocessor for Online amatur writer
![Logo](https://github.com/alenbluebee/novelformatter/blob/main/logo.jpeg)
